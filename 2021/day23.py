# nodemon --exec "python3 ./2021/day23.py" ./2021/day23.py

import copy
import collections
import random

input = [
    "#############",
    "#...........#",
    "###C#A#B#D###",
    "  #D#C#A#B#  ",
    "  #########  ",
]

# 0

input = [
    "#############",
    "#A..........#",
    "###C#.#B#D###",
    "  #D#C#A#B#  ",
    "  #########  ",
]

# + 5
# 5

input = [
    "#############",
    "#A......B...#",
    "###C#.#.#D###",
    "  #D#C#A#B#  ",
    "  #########  ",
]

# + 20
# 25

input = [
    "#############",
    "#AA.....B...#",
    "###C#.#.#D###",
    "  #D#C#.#B#  ",
    "  #########  ",
]

# + 7
# 32

input = [
    "#############",
    "#AA.....B...#",
    "###.#.#.#D###",
    "  #D#C#C#B#  ",
    "  #########  ",
]

# + 700
# 732

input = [
    "#############",
    "#AA.....B...#",
    "###.#.#C#D###",
    "  #D#.#C#B#  ",
    "  #########  ",
]

# + 500
# 1232

input = [
    "#############",
    "#AA.........#",
    "###.#.#C#D###",
    "  #D#B#C#B#  ",
    "  #########  ",
]

# + 50
# 1282

input = [
    "#############",
    "#AA.......D.#",
    "###.#.#C#.###",
    "  #D#B#C#B#  ",
    "  #########  ",
]

# + 2000
# 3282

input = [
    "#############",
    "#AA.......D.#",
    "###.#B#C#.###",
    "  #D#B#C#.#  ",
    "  #########  ",
]

# + 70
# 3352

input = [
    "#############",
    "#AA.......D.#",
    "###.#B#C#.###",
    "  #.#B#C#D#  ",
    "  #########  ",
]

# + 10000
# 13352

input = [
    "#############",
    "#AA.........#",
    "###.#B#C#D###",
    "  #.#B#C#D#  ",
    "  #########  ",
]

# + 2000
# 15352

input = [
    "#############",
    "#A..........#",
    "###.#B#C#D###",
    "  #A#B#C#D#  ",
    "  #########  ",
]

# + 3
# 15355

input = [
    "#############",
    "#...........#",
    "###A#B#C#D###",
    "  #A#B#C#D#  ",
    "  #########  ",
]

# + 3
# 15358

energyReq = dict([
    ('A', 1),
    ('B', 10),
    ('C', 100),
    ('D', 1000),
])












input = [
    "#############",
    "#...........#",
    "###C#A#B#D###",
    "  #D#C#B#A#  ",
    "  #D#B#A#C#  ",
    "  #D#C#A#B#  ",
    "  #########  ",
]
# 0

input = [
    "#############",
    "#..........B#",
    "###C#A#.#D###",
    "  #D#C#B#A#  ",
    "  #D#B#A#C#  ",
    "  #D#C#A#B#  ",
    "  #########  ",
]

# + 50
# 50

input = [
    "#############",
    "#.........BB#",
    "###C#A#.#D###",
    "  #D#C#.#A#  ",
    "  #D#B#A#C#  ",
    "  #D#C#A#B#  ",
    "  #########  ",
]

# + 50
# 100

input = [
    "#############",
    "#A........BB#",
    "###C#A#.#D###",
    "  #D#C#.#A#  ",
    "  #D#B#.#C#  ",
    "  #D#C#A#B#  ",
    "  #########  ",
]

# + 9
# 109

input = [
    "#############",
    "#AA.......BB#",
    "###C#A#.#D###",
    "  #D#C#.#A#  ",
    "  #D#B#.#C#  ",
    "  #D#C#.#B#  ",
    "  #########  ",
]

# + 9
# 118

input = [
    "#############",
    "#AA.A.....BB#",
    "###C#.#.#D###",
    "  #D#C#.#A#  ",
    "  #D#B#.#C#  ",
    "  #D#C#.#B#  ",
    "  #########  ",
]

# + 2
# 120

input = [
    "#############",
    "#AA.A.....BB#",
    "###C#.#.#D###",
    "  #D#.#.#A#  ",
    "  #D#B#.#C#  ",
    "  #D#C#C#B#  ",
    "  #########  ",
]

# + 800
# 920

input = [
    "#############",
    "#AA.A...B.BB#",
    "###C#.#.#D###",
    "  #D#.#.#A#  ",
    "  #D#.#.#C#  ",
    "  #D#C#C#B#  ",
    "  #########  ",
]

# + 60
# 980

input = [
    "#############",
    "#AA.A...B.BB#",
    "###C#.#.#D###",
    "  #D#.#.#A#  ",
    "  #D#.#C#C#  ",
    "  #D#.#C#B#  ",
    "  #########  ",
]

# + 900
# 1880

input = [
    "#############",
    "#AA.A.....BB#",
    "###C#.#.#D###",
    "  #D#.#.#A#  ",
    "  #D#.#C#C#  ",
    "  #D#B#C#B#  ",
    "  #########  ",
]

# + 70
# 1950

input = [
    "#############",
    "#AA.A......B#",
    "###C#.#.#D###",
    "  #D#.#.#A#  ",
    "  #D#B#C#C#  ",
    "  #D#B#C#B#  ",
    "  #########  ",
]

# + 80
# 2030

input = [
    "#############",
    "#AA.A.......#",
    "###C#.#.#D###",
    "  #D#B#.#A#  ",
    "  #D#B#C#C#  ",
    "  #D#B#C#B#  ",
    "  #########  ",
]

# + 80
# 2110

input = [
    "#############",
    "#AA.....A...#",
    "###C#.#.#D###",
    "  #D#B#.#A#  ",
    "  #D#B#C#C#  ",
    "  #D#B#C#B#  ",
    "  #########  ",
]

# + 4
# 2114

input = [
    "#############",
    "#AA.....A...#",
    "###.#.#.#D###",
    "  #D#B#C#A#  ",
    "  #D#B#C#C#  ",
    "  #D#B#C#B#  ",
    "  #########  ",
]

# + 700
# 2814

input = [
    "#############",
    "#AA........A#",
    "###.#.#.#D###",
    "  #D#B#C#A#  ",
    "  #D#B#C#C#  ",
    "  #D#B#C#B#  ",
    "  #########  ",
]

# + 3
# 2817

input = [
    "#############",
    "#AA.......DA#",
    "###.#.#.#.###",
    "  #D#B#C#A#  ",
    "  #D#B#C#C#  ",
    "  #D#B#C#B#  ",
    "  #########  ",
]

# + 2000
# 4817

input = [
    "#############",
    "#AA.A.....DA#",
    "###.#.#.#.###",
    "  #D#B#C#.#  ",
    "  #D#B#C#C#  ",
    "  #D#B#C#B#  ",
    "  #########  ",
]

# + 7
# 4824

input = [
    "#############",
    "#AA.A.....DA#",
    "###.#.#C#.###",
    "  #D#B#C#.#  ",
    "  #D#B#C#.#  ",
    "  #D#B#C#B#  ",
    "  #########  ",
]

# + 600
# 5424

input = [
    "#############",
    "#AA.A.....DA#",
    "###.#B#C#.###",
    "  #D#B#C#.#  ",
    "  #D#B#C#.#  ",
    "  #D#B#C#.#  ",
    "  #########  ",
]

# + 90
# 5534

input = [
    "#############",
    "#AA.A......A#",
    "###.#B#C#.###",
    "  #D#B#C#.#  ",
    "  #D#B#C#.#  ",
    "  #D#B#C#D#  ",
    "  #########  ",
]

# + 5000
# 10534

input = [
    "#############",
    "#AA.......AA#",
    "###.#B#C#.###",
    "  #D#B#C#.#  ",
    "  #D#B#C#.#  ",
    "  #D#B#C#D#  ",
    "  #########  ",
]

# + 6
# 10540

input = [
    "#############",
    "#AA.......AA#",
    "###.#B#C#D###",
    "  #.#B#C#D#  ",
    "  #.#B#C#D#  ",
    "  #.#B#C#D#  ",
    "  #########  ",
]

# + 11 * 1000 * 3 = + 33000
# 43540

input = [
    "#############",
    "#.........AA#",
    "###.#B#C#D###",
    "  #.#B#C#D#  ",
    "  #A#B#C#D#  ",
    "  #A#B#C#D#  ",
    "  #########  ",
]

# +5 +5
# 43550

input = [
    "#############",
    "#...........#",
    "###A#B#C#D###",
    "  #A#B#C#D#  ",
    "  #A#B#C#D#  ",
    "  #A#B#C#D#  ",
    "  #########  ",
]

# + 9 + 9
# 43568

















input = [
    "#############",
    "#...........#",
    "###C#A#B#D###",
    "  #D#C#B#A#  ",
    "  #D#B#A#C#  ",
    "  #D#C#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#...........#",
    "###C#A#B#D###",
    "  #D#C#B#A#  ",
    "  #D#B#A#C#  ",
    "  #D#C#A#B#  ",
    "  #########  ",
]







input = [
    "#############",
    "#D........CA#",
    "###C#A#B#.###",
    "  #D#C#B#.#  ",
    "  #D#B#A#.#  ",
    "  #D#C#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#D........CA#",
    "###C#A#B#.###",
    "  #D#C#B#.#  ",
    "  #D#B#A#.#  ",
    "  #D#C#A#B#  ",
    "  #########  ",
]










input = [
    "#############",
    "#AB.......CC#",
    "###C#.#B#D###",
    "  #D#.#B#A#  ",
    "  #D#.#A#C#  ",
    "  #D#.#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#A........CC#",
    "###C#.#.#D###",
    "  #D#B#.#A#  ",
    "  #D#B#A#C#  ",
    "  #D#B#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#C........CA#",
    "###C#.#.#D###",
    "  #D#B#.#A#  ",
    "  #D#B#A#C#  ",
    "  #D#B#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#CC........A#",
    "###C#.#.#D###",
    "  #D#B#.#A#  ",
    "  #D#B#A#C#  ",
    "  #D#B#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#CC.......AA#",
    "###C#.#.#D###",
    "  #D#B#.#A#  ",
    "  #D#B#.#C#  ",
    "  #D#B#A#B#  ",
    "  #########  ",
]






input = [
    "#############",
    "#C.........A#",
    "###C#.#B#D###",
    "  #D#.#B#A#  ",
    "  #D#B#A#C#  ",
    "  #D#C#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#CC.....B.A#",
    "###C#.#B#D###",
    "  #D#.#B#A#  ",
    "  #D#.#A#C#  ",
    "  #D#.#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#CC........A#",
    "###C#.#.#D###",
    "  #D#B#.#A#  ",
    "  #D#B#A#C#  ",
    "  #D#B#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#CC.....A.AA#",
    "###C#.#.#D###",
    "  #D#B#.#A#  ",
    "  #D#B#.#C#  ",
    "  #D#B#.#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#.......A.AA#",
    "###.#.#.#D###",
    "  #D#B#C#A#  ",
    "  #D#B#C#C#  ",
    "  #D#B#C#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#DD.....A.AA#",
    "###.#.#.#D###",
    "  #.#B#C#A#  ",
    "  #.#B#C#C#  ",
    "  #D#B#C#B#  ",
    "  #########  ",
]









input = [
    "#############",
    "#...........#",
    "###C#A#B#D###",
    "  #D#C#B#A#  ",
    "  #D#B#A#C#  ",
    "  #D#C#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#.....B.....#",
    "###C#A#.#D###",
    "  #D#C#B#A#  ",
    "  #D#B#A#C#  ",
    "  #D#C#A#B#  ",
    "  #########  ",
]






input = [
    "#############",
    "#BB.......AA#",
    "###C#A#.#D###",
    "  #D#C#.#A#  ",
    "  #D#B#.#C#  ",
    "  #D#C#.#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#BB.......AA#",
    "###.#A#.#D###",
    "  #D#C#.#A#  ",
    "  #D#B#.#C#  ",
    "  #D#C#C#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#BB.......AA#",
    "###.#A#.#D###",
    "  #D#C#.#A#  ",
    "  #D#B#.#C#  ",
    "  #D#C#C#B#  ",
    "  #########  ",
]





input = [
    "#############",
    "#AA.......BB#",
    "  #D#C#.#A#  ",
    "###C#A#.#D###",
    "  #D#B#.#C#  ",
    "  #D#C#.#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#AA.C.B.A.BB#",
    "  #D#.#.#A#  ",
    "###C#.#.#D###",
    "  #D#.#.#C#  ",
    "  #D#.#C#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#BB.....A.AA#",
    "  #D#.#.#A#  ",
    "###C#.#.#D###",
    "  #D#B#C#C#  ",
    "  #D#B#C#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#.......A.AA#",
    "  #D#B#.#A#  ",
    "###C#B#.#D###",
    "  #D#B#C#C#  ",
    "  #D#B#C#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#.......A.AA#",
    "  #D#B#.#A#  ",
    "###C#B#.#D###",
    "  #D#B#C#C#  ",
    "  #D#B#C#B#  ",
    "  #########  ",
]




input = [
    "#############",
    "#.......C.AC#",
    "###.#.#B#D###",
    "  #D#.#B#A#  ",
    "  #D#B#A#C#  ",
    "  #D#C#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#C....B.C.AC#",
    "###.#.#B#D###",
    "  #D#.#B#A#  ",
    "  #D#.#A#C#  ",
    "  #D#.#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#C......C.AC#",
    "###.#.#.#D###",
    "  #D#B#.#A#  ",
    "  #D#B#A#C#  ",
    "  #D#B#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#C......C.CA#",
    "###.#.#.#D###",
    "  #D#B#.#A#  ",
    "  #D#B#A#C#  ",
    "  #D#B#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#CA.....C.CA#",
    "###.#.#.#D###",
    "  #D#B#.#A#  ",
    "  #D#B#.#C#  ",
    "  #D#B#A#B#  ",
    "  #########  ",
]




input = [
    "#############",
    "#A........CC#",
    "###.#.#B#D###",
    "  #D#.#B#A#  ",
    "  #D#B#A#C#  ",
    "  #D#C#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#AB.....C.CC#",
    "###.#.#B#D###",
    "  #D#.#B#A#  ",
    "  #D#.#A#C#  ",
    "  #D#.#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#A......C.CC#",
    "###.#.#.#D###",
    "  #D#B#.#A#  ",
    "  #D#B#A#C#  ",
    "  #D#B#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#A......C.CC#",
    "###.#.#.#D###",
    "  #D#B#.#A#  ",
    "  #D#B#A#C#  ",
    "  #D#B#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#AA.....C.CC#",
    "###.#.#.#D###",
    "  #D#B#.#A#  ",
    "  #D#B#.#C#  ",
    "  #D#B#A#B#  ",
    "  #########  ",
]













input = [
    "#############",
    "#CC........A#",
    "###.#.#B#D###",
    "  #D#.#B#A#  ",
    "  #D#B#A#C#  ",
    "  #D#C#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#CC.B.....CA#",
    "###.#.#B#D###",
    "  #D#.#B#A#  ",
    "  #D#.#A#C#  ",
    "  #D#.#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#CC.......CA#",
    "###.#.#.#D###",
    "  #D#B#.#A#  ",
    "  #D#B#A#C#  ",
    "  #D#B#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#AC.......CC#",
    "###.#.#.#D###",
    "  #D#B#.#A#  ",
    "  #D#B#A#C#  ",
    "  #D#B#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#AC.A.A.....#",
    "###.#.#.#D###",
    "  #D#B#.#A#  ",
    "  #D#B#C#C#  ",
    "  #D#B#C#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#AC.A.A.D.A.#",
    "###.#.#.#.###",
    "  #D#B#.#.#  ",
    "  #D#B#C#C#  ",
    "  #D#B#C#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#AC.A.A.D.CA#",
    "###.#.#.#.###",
    "  #D#B#.#.#  ",
    "  #D#B#C#.#  ",
    "  #D#B#C#B#  ",
    "  #########  ",
]









input = [
    "#############",
    "#A.........C#",
    "###C#.#B#D###",
    "  #D#.#B#A#  ",
    "  #D#B#A#C#  ",
    "  #D#C#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#AB.......BC#",
    "###C#.#.#D###",
    "  #D#.#.#A#  ",
    "  #D#B#A#C#  ",
    "  #D#C#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#AB.C.B...BC#",
    "###C#.#.#D###",
    "  #D#.#.#A#  ",
    "  #D#.#A#C#  ",
    "  #D#.#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#CB.C.B...BA#",
    "###C#.#.#D###",
    "  #D#.#.#A#  ",
    "  #D#.#A#C#  ",
    "  #D#.#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#CB.C.B...BA#",
    "###C#.#.#D###",
    "  #D#.#.#A#  ",
    "  #D#.#A#C#  ",
    "  #D#.#A#B#  ",
    "  #########  ",
]








input = [
    "#############",
    "#CB.C.....BA#",
    "###C#.#.#D###",
    "  #D#.#.#A#  ",
    "  #D#.#A#C#  ",
    "  #D#B#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#CB.C......A#",
    "###C#.#.#D###",
    "  #D#.#.#A#  ",
    "  #D#B#A#C#  ",
    "  #D#B#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#CB.C......A#",
    "###C#.#.#D###",
    "  #D#.#.#A#  ",
    "  #D#B#A#C#  ",
    "  #D#B#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#CB.C...A.AA#",
    "###C#.#.#D###",
    "  #D#.#.#A#  ",
    "  #D#B#.#C#  ",
    "  #D#B#.#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#CB.....A.AA#",
    "###.#.#.#D###",
    "  #D#.#.#A#  ",
    "  #D#B#C#C#  ",
    "  #D#B#C#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#.......A.AA#",
    "###.#.#.#D###",
    "  #D#B#C#A#  ",
    "  #D#B#C#C#  ",
    "  #D#B#C#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#.......A.AA#",
    "###.#.#.#D###",
    "  #D#B#C#A#  ",
    "  #D#B#C#C#  ",
    "  #D#B#C#B#  ",
    "  #########  ",
]





input = [
    "#############",
    "#AB.B......C#",
    "###C#.#.#D###",
    "  #D#.#.#A#  ",
    "  #D#B#A#C#  ",
    "  #D#C#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#AB.B...C.BC#",
    "###C#.#.#D###",
    "  #D#.#.#A#  ",
    "  #D#.#A#C#  ",
    "  #D#.#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#A......C.BC#",
    "###C#.#.#D###",
    "  #D#.#.#A#  ",
    "  #D#B#A#C#  ",
    "  #D#B#A#B#  ",
    "  #########  ",
]
input = [
    "#############",
    "#A......C.BC#",
    "###C#.#.#D###",
    "  #D#.#.#A#  ",
    "  #D#B#.#C#  ",
    "  #D#B#.#B#  ",
    "  #########  ",
]